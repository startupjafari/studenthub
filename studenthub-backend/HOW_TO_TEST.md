# üß™ –ö–∞–∫ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –≤—Å–µ API endpoints

## ‚úÖ –ß—Ç–æ –±—ã–ª–æ —Å–æ–∑–¥–∞–Ω–æ

–í—Å–µ —Ç–µ—Å—Ç—ã –¥–ª—è Auth Module –≥–æ—Ç–æ–≤—ã! –°–æ–∑–¥–∞–Ω—ã:

1. **E2E —Ç–µ—Å—Ç—ã** (4 —Ñ–∞–π–ª–∞):
   - `test/auth-simple.e2e-spec.ts` - —É–ø—Ä–æ—â–µ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã
   - `test/auth-integration.e2e-spec.ts` - –ø–æ–ª–Ω—ã–µ —Ñ–ª–æ—É
   - `test/auth-complete.e2e-spec.ts` - –≤—Å–µ endpoints –¥–µ—Ç–∞–ª—å–Ω–æ
   - `test/auth.e2e-spec.ts` - –±–∞–∑–æ–≤—ã–µ —Ç–µ—Å—Ç—ã

2. **Unit —Ç–µ—Å—Ç—ã** (2 —Ñ–∞–π–ª–∞):
   - `src/modules/auth/services/password.service.spec.ts`
   - `src/modules/auth/auth.service.spec.ts`

## üöÄ –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤

### –í—Å–µ —Ç–µ—Å—Ç—ã
```bash
npm run test:e2e
```

### –¢–æ–ª—å–∫–æ Auth —Ç–µ—Å—Ç—ã
```bash
npm run test:e2e:auth
```

### Unit —Ç–µ—Å—Ç—ã
```bash
npm run test
```

### –° –ø–æ–∫—Ä—ã—Ç–∏–µ–º –∫–æ–¥–∞
```bash
npm run test:cov
```

## üìã –ß—Ç–æ —Ç–µ—Å—Ç–∏—Ä—É–µ—Ç—Å—è

### ‚úÖ –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è
- –£—Å–ø–µ—à–Ω–∞—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è
- –í–∞–ª–∏–¥–∞—Ü–∏—è email –∏ –ø–∞—Ä–æ–ª—è
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥—É–±–ª–∏–∫–∞—Ç–æ–≤

### ‚úÖ –í–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è Email
- –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ —Å –∫–æ–¥–æ–º
- –ü–æ–≤—Ç–æ—Ä–Ω–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞ –∫–æ–¥–∞

### ‚úÖ –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
- –õ–æ–≥–∏–Ω —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ credentials
- –õ–æ–≥–∏–Ω —Å –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ credentials
- –ü–æ–ª—É—á–µ–Ω–∏–µ —Ç–µ–∫—É—â–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–æ–≤
- Logout –∏ logout-all

### ‚úÖ –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–∞—Ä–æ–ª—è
- –ó–∞–ø—Ä–æ—Å –Ω–∞ —Å–±—Ä–æ—Å
- –°–±—Ä–æ—Å –ø–æ –∫–æ–¥—É
- –°–º–µ–Ω–∞ –ø–∞—Ä–æ–ª—è

### ‚úÖ 2FA
- –ì–µ–Ω–µ—Ä–∞—Ü–∏—è QR –∫–æ–¥–∞
- –í–∫–ª—é—á–µ–Ω–∏–µ 2FA
- –õ–æ–≥–∏–Ω —Å 2FA
- –û—Ç–∫–ª—é—á–µ–Ω–∏–µ 2FA

### ‚úÖ Rate Limiting
- –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –ø–æ–ø—ã—Ç–æ–∫ –ª–æ–≥–∏–Ω–∞
- –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–π

## üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä–µ–¥ –∑–∞–ø—É—Å–∫–æ–º

1. **–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –∑–∞–ø—É—â–µ–Ω—ã:**
   - PostgreSQL –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
   - Redis —Å–µ—Ä–≤–µ—Ä

2. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è** (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ):
   ```env
   DATABASE_URL="postgresql://..."
   REDIS_HOST="localhost"
   REDIS_PORT=6379
   ```

3. **–ò–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ç–µ—Å—Ç–æ–≤—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏:**
   ```env
   TEST_DATABASE_URL="postgresql://..."
   TEST_REDIS_HOST="localhost"
   ```

## üìä –ü—Ä–∏–º–µ—Ä –≤—ã–≤–æ–¥–∞ —Ç–µ—Å—Ç–æ–≤

```
‚úÖ PASS  test/auth-simple.e2e-spec.ts
  Auth API Endpoints (e2e)
    POST /api/auth/register
      ‚úì –¥–æ–ª–∂–µ–Ω –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (123ms)
      ‚úì –¥–æ–ª–∂–µ–Ω –æ—Ç–∫–ª–æ–Ω–∏—Ç—å –Ω–µ–≤–∞–ª–∏–¥–Ω—ã–π email (45ms)
      ‚úì –¥–æ–ª–∂–µ–Ω –æ—Ç–∫–ª–æ–Ω–∏—Ç—å —Å–ª–∞–±—ã–π –ø–∞—Ä–æ–ª—å (38ms)
    POST /api/auth/login
      ‚úì –¥–æ–ª–∂–µ–Ω –≤–æ–π—Ç–∏ —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ credentials (89ms)
      ‚úì –¥–æ–ª–∂–µ–Ω –æ—Ç–∫–ª–æ–Ω–∏—Ç—å –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø–∞—Ä–æ–ª—å (42ms)
    GET /api/auth/me
      ‚úì –¥–æ–ª–∂–µ–Ω –≤–µ—Ä–Ω—É—Ç—å —Ç–µ–∫—É—â–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (56ms)
```

## üêõ –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### –¢–µ—Å—Ç—ã –ø–∞–¥–∞—é—Ç —Å –æ—à–∏–±–∫–æ–π –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –ë–î
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ PostgreSQL –∑–∞–ø—É—â–µ–Ω
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ `DATABASE_URL` –≤ `.env`

### –¢–µ—Å—Ç—ã –ø–∞–¥–∞—é—Ç —Å –æ—à–∏–±–∫–æ–π Redis
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ Redis –∑–∞–ø—É—â–µ–Ω
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è

### –¢–µ—Å—Ç—ã –ø–∞–¥–∞—é—Ç —Å 404
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–æ
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—É—Ç–∏ –≤ —Ç–µ—Å—Ç–∞—Ö (–¥–æ–ª–∂–Ω—ã –Ω–∞—á–∏–Ω–∞—Ç—å—Å—è —Å `/api/auth/...`)

## üìù –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç–µ—Å—Ç–æ–≤

–¢–µ—Å—Ç—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:
- ‚úÖ –°–æ–∑–¥–∞—é—Ç —Ç–µ—Å—Ç–æ–≤—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- ‚úÖ –û—á–∏—â–∞—é—Ç –¥–∞–Ω–Ω—ã–µ –ø–æ—Å–ª–µ —Ç–µ—Å—Ç–æ–≤
- ‚úÖ –ü—Ä–æ–≤–µ—Ä—è—é—Ç –≤—Å–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏
- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É—é—Ç —Ä–µ–∞–ª—å–Ω—É—é –ë–î –∏ Redis

## ‚úÖ –ì–æ—Ç–æ–≤–æ!

–í—Å–µ —Ç–µ—Å—Ç—ã —Å–æ–∑–¥–∞–Ω—ã –∏ –≥–æ—Ç–æ–≤—ã –∫ –∑–∞–ø—É—Å–∫—É. –ü—Ä–æ—Å—Ç–æ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ:
```bash
npm run test:e2e:auth
```

–ò –≤—Å–µ endpoints –±—É–¥—É—Ç –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω—ã!

