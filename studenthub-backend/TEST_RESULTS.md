# –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è Auth API

## üß™ –°–æ–∑–¥–∞–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã

### E2E —Ç–µ—Å—Ç—ã (End-to-End)

1. **test/auth-simple.e2e-spec.ts** ‚úÖ
   - –ë–∞–∑–æ–≤—ã–µ —Ç–µ—Å—Ç—ã –≤—Å–µ—Ö endpoints
   - –£–ø—Ä–æ—â–µ–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è –¥–ª—è –±—ã—Å—Ç—Ä–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏

2. **test/auth-integration.e2e-spec.ts** ‚úÖ
   - –ü–æ–ª–Ω—ã–µ —Ñ–ª–æ—É:
     - –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è ‚Üí –í–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è ‚Üí –õ–æ–≥–∏–Ω
     - –õ–æ–≥–∏–Ω ‚Üí Refresh ‚Üí Logout
     - Forgot Password ‚Üí Reset Password
     - Enable 2FA ‚Üí Login with 2FA

3. **test/auth-complete.e2e-spec.ts** ‚úÖ
   - –í—Å–µ endpoints —Å –¥–µ—Ç–∞–ª—å–Ω—ã–º–∏ –ø—Ä–æ–≤–µ—Ä–∫–∞–º–∏
   - Rate limiting —Ç–µ—Å—Ç—ã
   - –ü–æ–ª–Ω–æ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ –≤—Å–µ—Ö —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤

### Unit —Ç–µ—Å—Ç—ã

1. **src/modules/auth/services/password.service.spec.ts** ‚úÖ
   - –¢–µ—Å—Ç—ã —Ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è –ø–∞—Ä–æ–ª–µ–π
   - –¢–µ—Å—Ç—ã –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –ø–∞—Ä–æ–ª–µ–π

2. **src/modules/auth/auth.service.spec.ts** ‚úÖ
   - –¢–µ—Å—Ç—ã –æ—Å–Ω–æ–≤–Ω—ã—Ö –º–µ—Ç–æ–¥–æ–≤ AuthService

## üìã –ü–æ–∫—Ä—ã—Ç–∏–µ endpoints

### ‚úÖ POST /api/auth/register
- –£—Å–ø–µ—à–Ω–∞—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è
- –í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥—É–±–ª–∏–∫–∞—Ç–æ–≤

### ‚úÖ POST /api/auth/verify-email
- –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ email
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–¥–∞

### ‚úÖ POST /api/auth/resend-verification
- –ü–æ–≤—Ç–æ—Ä–Ω–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞ –∫–æ–¥–∞

### ‚úÖ POST /api/auth/login
- –£—Å–ø–µ—à–Ω—ã–π –ª–æ–≥–∏–Ω
- –ù–µ–≤–µ—Ä–Ω—ã–µ credentials
- 2FA required

### ‚úÖ POST /api/auth/2fa/verify
- –í–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è 2FA –ø—Ä–∏ –ª–æ–≥–∏–Ω–µ

### ‚úÖ POST /api/auth/refresh
- –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ access token

### ‚úÖ POST /api/auth/logout
- –í—ã—Ö–æ–¥ –∏–∑ —Å–∏—Å—Ç–µ–º—ã

### ‚úÖ POST /api/auth/logout-all
- –í—ã—Ö–æ–¥ —Å–æ –≤—Å–µ—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤

### ‚úÖ GET /api/auth/me
- –ü–æ–ª—É—á–µ–Ω–∏–µ —Ç–µ–∫—É—â–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

### ‚úÖ POST /api/auth/forgot-password
- –ó–∞–ø—Ä–æ—Å –Ω–∞ —Å–±—Ä–æ—Å –ø–∞—Ä–æ–ª—è

### ‚úÖ POST /api/auth/reset-password
- –°–±—Ä–æ—Å –ø–∞—Ä–æ–ª—è –ø–æ –∫–æ–¥—É

### ‚úÖ PUT /api/auth/change-password
- –°–º–µ–Ω–∞ –ø–∞—Ä–æ–ª—è

### ‚úÖ POST /api/auth/2fa/generate
- –ì–µ–Ω–µ—Ä–∞—Ü–∏—è QR –∫–æ–¥–∞

### ‚úÖ POST /api/auth/2fa/enable
- –í–∫–ª—é—á–µ–Ω–∏–µ 2FA

### ‚úÖ POST /api/auth/2fa/disable
- –û—Ç–∫–ª—é—á–µ–Ω–∏–µ 2FA

## üöÄ –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤

```bash
# –í—Å–µ E2E —Ç–µ—Å—Ç—ã
npm run test:e2e

# –¢–æ–ª—å–∫–æ Auth —Ç–µ—Å—Ç—ã
npm run test:e2e:auth

# –° –ø–æ–∫—Ä—ã—Ç–∏–µ–º –∫–æ–¥–∞
npm run test:cov

# Unit —Ç–µ—Å—Ç—ã
npm run test
```

## ‚úÖ –ì–æ—Ç–æ–≤–æ –∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é!

–í—Å–µ —Ç–µ—Å—Ç—ã —Å–æ–∑–¥–∞–Ω—ã –∏ –≥–æ—Ç–æ–≤—ã –∫ –∑–∞–ø—É—Å–∫—É. –¢–µ—Å—Ç—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:
- –°–æ–∑–¥–∞—é—Ç —Ç–µ—Å—Ç–æ–≤—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- –û—á–∏—â–∞—é—Ç –¥–∞–Ω–Ω—ã–µ –ø–æ—Å–ª–µ —Ç–µ—Å—Ç–æ–≤
- –ü—Ä–æ–≤–µ—Ä—è—é—Ç –≤—Å–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

